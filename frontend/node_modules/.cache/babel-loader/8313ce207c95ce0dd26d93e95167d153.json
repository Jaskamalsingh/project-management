{"ast":null,"code":"import h, { Fragment as s, createContext as L, useContext as y, useEffect as m, useRef as d, useState as T } from \"react\";\nimport { createPortal as G } from \"react-dom\";\nimport { forwardRefWithAs as P, render as R } from '../../utils/render.js';\nimport { useIsoMorphicEffect as M } from '../../hooks/use-iso-morphic-effect.js';\nimport { usePortalRoot as v } from '../../internal/portal-force-root.js';\nimport { useServerHandoffComplete as C } from '../../hooks/use-server-handoff-complete.js';\nimport { optionalRef as O, useSyncRefs as g } from '../../hooks/use-sync-refs.js';\nimport { useOwnerDocument as c } from '../../hooks/use-owner.js';\nimport { microTask as H } from '../../utils/micro-task.js';\nimport { isServer as E } from '../../utils/ssr.js';\nfunction x(i) {\n  let u = v(),\n    o = y(A),\n    e = c(i),\n    [r, f] = T(() => {\n      if (!u && o !== null || E) return null;\n      let n = e == null ? void 0 : e.getElementById(\"headlessui-portal-root\");\n      if (n) return n;\n      if (e === null) return null;\n      let t = e.createElement(\"div\");\n      return t.setAttribute(\"id\", \"headlessui-portal-root\"), e.body.appendChild(t);\n    });\n  return m(() => {\n    r !== null && (e != null && e.body.contains(r) || e == null || e.body.appendChild(r));\n  }, [r, e]), m(() => {\n    u || o !== null && f(o.current);\n  }, [o, f, u]), r;\n}\nlet _ = s,\n  U = P(function (u, o) {\n    let e = u,\n      r = d(null),\n      f = g(O(a => {\n        r.current = a;\n      }), o),\n      n = c(r),\n      t = x(r),\n      [l] = T(() => {\n        var a;\n        return E ? null : (a = n == null ? void 0 : n.createElement(\"div\")) != null ? a : null;\n      }),\n      b = C(),\n      p = d(!1);\n    return M(() => {\n      if (p.current = !1, !(!t || !l)) return t.contains(l) || (l.setAttribute(\"data-headlessui-portal\", \"\"), t.appendChild(l)), () => {\n        p.current = !0, H(() => {\n          var a;\n          !p.current || !t || !l || (t.removeChild(l), t.childNodes.length <= 0 && ((a = t.parentElement) == null || a.removeChild(t)));\n        });\n      };\n    }, [t, l]), b ? !t || !l ? null : G(R({\n      ourProps: {\n        ref: f\n      },\n      theirProps: e,\n      defaultTag: _,\n      name: \"Portal\"\n    }), l) : null;\n  }),\n  j = s,\n  A = L(null),\n  F = P(function (u, o) {\n    let {\n        target: e,\n        ...r\n      } = u,\n      n = {\n        ref: g(o)\n      };\n    return h.createElement(A.Provider, {\n      value: e\n    }, R({\n      ourProps: n,\n      theirProps: r,\n      defaultTag: j,\n      name: \"Popover.Group\"\n    }));\n  }),\n  $ = Object.assign(U, {\n    Group: F\n  });\nexport { $ as Portal };","map":null,"metadata":{},"sourceType":"module"}